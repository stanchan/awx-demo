---
environment: devtest

docker_build_environment: true
docker_glibc_environment: true

#awx_version: 1.0.2.337
awx_version: 1.0.2.70
awx_host: awxhost.Demo.com
awx_host_port: 443
awx_host_url: "https://{{ awx_host }}:{{ awx_host_port }}"
awx_admin_user: admin
awx_admin_password: password
awx_ssl_verify: True
awx_search_domain: []

awx_config: /root/.tower_cli.cfg
awx_projects_root: /srv/awx/projects

awx_secret: password

awx_network: default
awx_network_type: bridge

postgres_user: awx
postgres_password: password
postgres_db: awx
postgres_host: postgres
postgres_port: 5432
postgres_data_dir: /srv/awx/postgres

rabbitmq_vhost: awx
rabbitmq_user: awx
rabbitmq_password: password
rabbitmq_host: rabbitmq
rabbitmq_port: 5672

memcached_host: memcached
memcached_port: 11211

awx_orgs:
  Demo:
    name: Demo
    description: Demo organization
    state: present

awx_teams:
  Development:
    name: Development
    description: Development team
    organization: Demo
    state: present

awx_users:
  - username: stanchan
    password: password
    first_name: Stan
    last_name: Chan
    superuser: true
    email: stanchan@gmail.com
    teams:
      - Development
    state: present

awx_projects:
  - name: stanchan_ansible-unifi
    description: stanchan_ansible-unifi project
    organization: Demo
    scm_credential: github_stanchan
    scm_type: git
    scm_branch: master
    scm_update_on_launch: true
    scm_url: git@github.com:stanchan/ansible-unifi.git
    state: present
  - name: stanchan_docker-awx
    description: stanchan_docker-awx project
    organization: Demo
    scm_credential: github_stanchan
    scm_type: git
    scm_branch: master
    scm_update_on_launch: true
    scm_url: git@github.com:stanchan/docker-awx.git
    state: present

awx_inventory_scripts:
  - name: teleport_production
    description: teleport_production inventory script
    organization: Demo
    script: |
      #!/bin/bash
      tsh -i ~/.ssh/id_rsa --proxy={{ teleport_proxy_host }}:{{ teleport_proxy_web_listen_address.split(':')[1] }} --user={{ teleport_awx_user }} ls --format=json \"\$@\"

awx_inventories:
  - name: Demo_production_unifi
    description: Demo_production_unifi inventory
    organization: Demo
    sources:
      - name: production
        description: production inventory
        source: scm
        source_project: stanchan_ansible-unifi
        source_path: inventory/production/hosts
    state: present
  - name: Demo_production_awx
    description: Demo_production_awx inventory
    organization: Demo
    sources:
      - name: production
        description: production inventory
        source: custom
        source_script: teleport_production
    state: present

awx_credentials:
  - name: github_stanchan
    credential_type: "Source Control"
    description: github_stanchan credential
    team: Development
    ssh_key_data: !vault |
                  $ANSIBLE_VAULT;1.1;AES256
                  61616633393835613138336335623631313366623563343630383866363137663463333462373437
                  3439376663353231386331396536636265613134623731320a386565343966333839306532303763
                  35643763653361633331363631303865633833626130636663663332353630663566633663353765
                  6663646533383932360a646465626535373861323763383061303163623166306239636663666565
                  38663038646663386230643035616537343639333465666235353361356361643639666565336363
                  66383163353338663834626639343262643231383666303237366665383236383935323430303433
                  37386538363362326231663861356562376139353135313431313734633861353531366438393630
                  36366464313132313163656530383630333630366139356339616630356438313531366631343531
                  30653161383461636632633162343535306537376334333633303038313032323235303562633765
                  66336333666439346362346538663036666161383632306432373130653565613034346435313938
                  38653964633936633635383136333930643364653736636530643164613565383936663034363835
                  32646138323033316634333336336132653033313365333362373266366434313433393230663262
                  38353431646663653733643966353434363830323666326233393532356561356631353861306266
                  66373837323366653861656565363561303732306564656563393433396432633066326662323739
                  36346663363138666366643766623062656265613432303736633165653134633431663939663736
                  64326238633636376638653538316163313132323561376165613732396632383563633732346431
                  39323337383765616438306561336266326464653935356465333866613234333630373063356562
                  66643737656334346331303566613830353031376432386236343633656364393661383537313264
                  33333031373332376364326462323539303134643764393635653534626138666638663536653966
                  30613739333232386337396264336339663765646531646462643732653134623233306439373766
                  35666263396661323766346665343137366532623962396661396430663637373961316332303862
                  35616666363631613434323561323661323538326630633031306230353934613538313733336233
                  39383638303732616538633335666164333662333365653636393034303236363835353262623939
                  63346234383166653137646236626464643265373932326539653362376535376533313639343462
                  38313561313735363966366637613161666333636464383130303931376334323133316632393362
                  32313964613839306662396365613236373264326133323763303933333162613166633361363336
                  61363435653662316438336432353133363531373366656137643031323833353434636661353835
                  38383634373433626633633366656130636166643239313430386633366464323331343562353836
                  64663161663032323439626365326462313464363733643139376530376136366134396639633761
                  39363234373036356438386264633661633465383332383465336266323131306335626535376265
                  36336235336337633434623938646231656663666562376434616334323036663964643539396262
                  36333837633564356439656339653437366236626432316262633365303864633261323762396261
                  35373262396664623035613939636139343730326336383335326563653334303261616337313264
                  32326639343365653236303436363062656166343833666330356661303266646334663462343935
                  65383935353237613762616332323962356266323762326665323934353635646439396136343636
                  65376431653538303963316166663438353263613633323531346433646436343538316237333230
                  30326231616261363936626263343932656134636131353434313239353263363864656630383735
                  37643131353334666337616362343038393861313735353333653630343037346238363936383461
                  38643831346663386131303665643865386332373332646430333537316435336334613631356231
                  33313838343837393533323766386461663066633863313964623438306538373430386139383062
                  63396636653536656461316531336335306166363866383062393235623034346265646336666135
                  35396133333934313439366230623763343866386464393238363830633838333538383235386530
                  62616334316438313330323237613962626536666330396535663561353835373462643965333137
                  39643338646638346533343939663866396436303861336635333339353862643830643433353163
                  62303731313861643731346236303033393564373034326633613730396535386638623265343938
                  66383435636332373438323233633535336137323464343038656231633536633663623165326564
                  64393163383833353032623931653932373564393331306231353537363966393661383133376435
                  39343562353131376234393463336630356530366132613632633833386537366533313832393638
                  61313332396366393634666566663930336331633266616537333833643165373430643835643036
                  36333665333061663165356434643762653333323864643463363030373363333137386230326430
                  34313531306636323734646664626263666531663365363063393538393133653733323031633637
                  37353662613537366132666661323130353666386637343463333333343631303061656335376431
                  31343864356562326562386162333532393434313838663961663166383037316230613331646461
                  63393138613633663666313832383238653533336331393137326231346137626436393161383432
                  65303366306335316336646136666164636435633661643532373566623932363435666437666165
                  30393332666236306361303335626661363831653837643539383838346561316263393938616362
                  36633434333335333335393365336131636163316530383161303961386636343266396161663730
                  63323930663965346266376131366234393264346263653131626366343331316637656238353233
                  31303361393736613335396439313237653535323165626633306435666333313931386661396638
                  35396265353563323065373166393332306330393837633335356466376631366339386537623565
                  61363265303165346334626435306337346332316235363738383431323766316366616234316332
                  63363161323936326466623932613633303837393433383338306136333461626434623533373136
                  62303563323564306663303537356137613138613061343533366666346435396630306561383238
                  36323038363665346464633335323366343234353531303362613962353539396463333661626266
                  36613162303365343836396139666464306634313233316366623033393963303666643866623236
                  35383836363230323339613139356136386563363834396365663535393134623866316139373434
                  35646364333735646533643461653335623137323331623839643265393532393662643732633964
                  30396639386132356662336434656430386564646235363036666530623761363265663433396266
                  30333731326137333834616163353562326138616334396666333161343362306339636561333438
                  36626239316661363238623866366437626630626638393038343531626163653962376131633562
                  38303066343835663762643637663232323262353131363965633137393161666366303831633464
                  35663031326564303832613630646165626339323965333537333536643034646139303265376635
                  37346239393165643434363138303438643133393238353034663932663430313663363335656631
                  34353462323837333638333866346534326535376538633533303334303764663433333735363364
                  63396632306238336436336539306665363537666533616436316361366139333730316134313536
                  32353731386566373132633635336264306638333132343236643936613038376634666665346662
                  61336439303736303637643831343363336237373666613737656232626362393632616531666638
                  32613466663733623335353663346538353535316236643038343432653332316262386432386363
                  34323366356364656465316263313137323262373637313638613133336262663931623634643130
                  36616237636132356535306331626361646562653465633034393036626464363239626233656534
                  38633262356337373930616138306564646661386338313164346464343338633231343237636631
                  30323035336434663032336666383037386162646433353265346666343261323937663330656165
                  62353839313732393434356130353537353665383939643334323035376230326662306539663661
                  31333666313065336462636666613637363334323962383663353632346337643331346266376663
                  63386563376261613765613265333834393662386364663634333537663265336135663563663761
                  38616135373236333330353335633362623632366563366363333431616136356264313739376631
                  64663364333031646464383338336232343934333633363637303565373163396430393330366264
                  63313530623634643362373931636263303534363633633661376632653266313133633661373364
                  36613964376438616230373632373935333436646632313230353363363030366433636135626137
                  63646137613430393332643264376564633439666130653531306439316430383362363631303533
                  35383530343861303165613537623335303365663432326237386234653935356131383034616432
                  30653834366631616362303533656166353933376536393635613930373231616139306635633634
                  62653431393766396237386666613331366461366330643431346332343935346662396364383931
                  61663737346665653266303964613638303530316663663534363362666361626338333732653732
                  39623066636432663239386163613839656533336138613361396566366165643261373336303263
                  38666134373037306137333565623362653133646666323664366262636633656466653663623165
                  39653337363833386231316630626633343731643738656431386330626334623831383938633863
                  65393731623537323563363464653466326536333263666135666361666132366263623265636438
                  62313662343533353765653963363933356462363938616435346639333832626437346439366462
                  39303130643931356436613038663338663365363832656132646162636563383236633065373336
                  30343339353336616536393866323636323265313333663965376562336134356331393065666438
                  64323261303531666363376663353664343739646165383834313932316666326234626638383865
                  35656438653062383132326566366331643163373632653862346638363466383739346261616666
                  39393463666132623166333730356463333233613263656131653030613537633961363632656664
                  35306666663236373761623335303732396565303330363430613131353039383363373535313939
                  61613636633130323131636633313465326336323265386662323136346230663530383631393663
                  32613630613963636262313631613533323362393131633066633963613366303534643233666662
                  35653835353137333161623436373030643563333332653430373039663739613931386332623031
                  38383232646365663330613036373736323965343338323831303464666532363761333636343131
                  31336639616662626466633539663437306434373833663531353935623765306137353765326530
                  31336661343832626362646133353939353139303864613565323232356437363865613863613561
                  30663166393262656362313365653864326537613334663864643432386564323639636334383238
                  65663839393263633633393666623961373330623066303836646638306465376665346635376137
                  38383562306531303931613936313337343134383033396665323133616433633134636332333766
                  30633030383764373764613039623662616263346533353432363930386630623965383531653965
                  31376333306537663261383664366265343439643934313462613532393263313763303138323732
                  33663565333532623736323537356236316561393666316133353635633834363937653338636531
                  39643132616366306566353736306665386634636537373062666538656137303166323962626639
                  31336332303838396561363636646637396534316633376333636261646662366562323833666638
                  36663136316131356664383965386662363831323038626131343963353737636565363738353538
                  66623466366636396235623232313138356430306663326265346232396264346335376436633364
                  36626133663135363462623539303261373933303561363339356362393139613434353066383730
                  30653733376564663034393730623638323062363337306162626437356139396339636162643061
                  36363862653764636232346361666533396135383532616465346563373436616332363166393338
                  33316432643031316632393337353031336465393461333938343234316638393066346537323562
                  61633930306336373063613664653564323939303665346264653865666337303132303766306333
                  32346135383961613466636339313336373735353237346539383039666131653730363363636132
                  66303333373232303239363330366432316432643930363865333937616336626562336364663934
                  38633931356436303536323938376434303061366264336635333333383337623539393062333738
                  66656565373363653937336561306266626634313131303538336531306136643037353039663436
                  39643633666439316561306165653138346133633564646532633233633139613532613465643262
                  66633835663435343236376337393464303831373935393166636237386464316130386366653734
                  64333137373866353962663061333866613236663437316230313631383465333333363866646431
                  38346361363961653665386366333234643765663865356432373463316131383737346330663239
                  63323164343833333034383936363864313662383534383930336265613437303966313235653032
                  32653736643561396237373365313635353264393432663330646233613765333238613562373431
                  62663361626136333039376632613531373234333137383239643336333738306562306434353930
                  33663262326639663366623834646563643531663938656333653634643337326562373735656364
                  32623361333237336535653833393838363230393339646336643064643039336433393963383461
                  61373665376164386239626430396361656462653632623761633261633839613635356362336162
                  61653565643330353236373065306436373038353561356465326564303532316666393962366430
                  65393261393136336236626166666534336430393561336162643734623435363361316466626630
                  66383636323336613233626435383961316366343736393836633931343133623235666532316663
                  30306237633165316661313633616638393433643738376434356562393965313936333937306366
                  31376435306463643239646339336363306534366363623937333937643334643838393766663039
                  63393064373962356537366365376134643633306637613433623161623565313939396135393837
                  62386565643234373362643962633862303064646364363562343461313335653932323965636633
                  34353637643564353639386463633439353762636530373662383462626634626138363638303936
                  66366433633363323763316534326163346333646262376132356562346238373938653137333134
                  66336635316266656261343965666233303861626363393239363364306132376161636463313438
                  63613737303730386535343965616633316463383238363964633437636434303861333963663064
                  33346465393162353737663661626133356233623061363962313462623563383433376362616236
                  33313231363538656264326666646138663532666637643632653334386562373463636330646465
                  37323565313732393830613131396633663235646466636130393232306432303034663933333138
                  66623263663766383934353862376634653339623937646436366465316438333933303365323563
                  34643035346437326132373934613233656630373737383562643962323632666362333561306462
                  34393635313539303736306664613235373139343634373639343730646432643033636434373333
                  31346561343766316538353964386264316464383262323331666139623936376438663430626565
                  30653030343630653330353634306333653362393332323061653732663765353662323938653036
                  36323538326630623665616635343265303835643439643261353133663966633135393033663933
                  37373164646161663761343033393738643630313232643064393666646237393234363533633331
                  34633265646639356461393232623365653231663331326538363237373637653338633162643133
                  39646566653338643533343330353037613035383334303762323035343837633261626230646663
                  33613435623732323062313836663764326638323334303735656233396436646430636464623963
                  37623263663236373366613234663361646437336163343961366630376432306335636535613030
                  34333163353434366637373161643461333335636664633432613135646361376434613864643561
                  64663166383366393039646462633236333539633530353035313536323230643738633665646339
                  39333330343936613738613561633931356434653264303332633936343930636366366366646230
                  35633836663039623131303330333662363331376633653765323230623935643933383431653731
                  32333462353138633238343163626435346636626335663534373962646261363064326536346139
                  31623237393261613663376532373365373330613434303933383366346632643430663662663336
                  30373334346437343233326664643463663761663132323431326536393232616538336433373738
                  3961
    state: present
  - name: Demo_teleport
    credential_type: "Machine"
    description: Demo_teleport credential
    team: Development
    username: root
    ssh_key_data: !vault |
                  $ANSIBLE_VAULT;1.1;AES256
                  38313732613863303266613363626564306336363033633633626438646431616364633930363663
                  3263323431613737343736333536643730306337393930310a306430343265353566326663346236
                  62353466653032383739396334313630306431353538613235313332613930663763313432396134
                  3063636136616535370a396630383334653231623666343031643735386237343731356564613931
                  38303932656133386535666263356439343433343761383131613265343564356435323866396232
                  32343764383666386664636435303464386230623264633362363430353962386164303234646562
                  62333166316561366139653934303030333562313964386437376230363833663631323432386661
                  34636437396261663763646136663331353264646562313033333332623330363464646239396565
                  61383862633031343631306534376662393263623565393136646138383135653366313861323464
                  63626138653238656665366162323435333866656532656465373164626531383030393737383139
                  62333337306264643239323437383430363235353062653362633636373538306432646663396535
                  64353937613964663731613037623536633962363561316233643735306231353139353464616262
                  65373835646461663731653863623732306532336164386530663136333664613364623664356461
                  63343666386538306132383465393531646230633732353336653363613964306632323264613438
                  33383663306639323066316332313238336635333933643136363638643539306433643031353630
                  36336263386338656238653539613334353764336231396537313839366661313238373436313333
                  34613535363938323030303539383462386162663265383463326130356262613237386663333735
                  37363063663236346333343766366666356435336639333664303233313430396561633732346435
                  66323564303938383833626163376539663263376430306165623434633365316239616237646661
                  63666564306265383663653631356435303262646430323534623038646631323565376235333363
                  64303734343939663432376635383731636437613066303832633161653038626463313430636237
                  33623763313039313934616266373763643865343861346534323931343436346466306166633339
                  39346335313166333963373734326232313032303461356230333766626464623231643238363135
                  61346635366232323635323233313264613863326266316461396637393964386464636232343961
                  33303865356438396562343139366632353038613465313730383834633664366333313435393164
                  38306363643266393863373734383030643630663364613334323162326265643765353063383666
                  31316532346462396363626130656261393762303065653565353534366461643966316163303932
                  37376132663463663863336232616433353537336461353431363130306132303065336638633831
                  35643065653930306133346131336130656236386438323732316263333564383164346438623237
                  38346564616437646464623834323038336337306132653931636434323135396430313264626265
                  37376465313835303736313265373838313435313333303866353536643133656463383162336663
                  37366365343934373664333334656362363562306361333062336139663535616230323932653665
                  38643166343861633666356234373165303462393637653166316233623335636539313361386335
                  64313566653562663436366632383164613932323862616637383739633932376535663662646561
                  66376533383034643261363939376363323361633936616231643932653465663135353135323638
                  34613234373232353730363932346132623631323064366537356331666530666533393732383231
                  62623666333862316566616661353333656430356364623132666137383764343965353761366361
                  35396631636562383263663234393761613738646533653066353330303666313963386239396464
                  30306165373739373036363131623462356661393765613737613430666362313638326135343936
                  30646533643134663035343762306561336334643866373461303637303234623536613262623366
                  34373231376531323164316439303162626665656633656364613762633431303566626531663031
                  31376232343161326165623939363063643130336438656665613134613265643837333637313330
                  35613061306234353831636266393238303936386461656666336361363030336438336661373363
                  37616234393965373533303038666462623231306261313438396265633434616234666537653736
                  61306564336466326265656534336664663438633931396131343338373834383233613331303833
                  35623365303063386431613065646161313235346637373163626233386464613132386639396264
                  37323537373731333531316133336535623232393039326438383438303030626639383038316532
                  66656666353962666566313930326535663065643665663762633036343336343765343464646563
                  61356664356235613266343566636330373532353661636131623539623161356665343663656639
                  36336665386631326565633131316465396536393562623933343239363133316438633739663761
                  33633863323635323966333934616664623834663938313765646164336139633937363836313861
                  64343465373562346630646538353133323636386466336263353534396136313966376439316332
                  38643232333438626661643562346131313063393764656166353530656131333262303538636336
                  30643537316636663034343235613237333830366238616664376162373261316561333935363039
                  35346238303464386264646534373530663637663438663339316333343336616164633432646261
                  61616562373765633636396634643262643532343839303565356537303331636163343639383362
                  33363039623538616336646665346664306464353937346138373036633736626131616666633036
                  33666162373039373632303433383536616631666133373864366438313334643365346535626339
                  30346536313862656535623338396535653362653437313538643163333430333965623036613132
                  64643637663338613434633635333634633664643061313038666634323635396363653266626162
                  33376237623061343364386533363662373565656134636533343434613961303835616463653231
                  34636666663631323636363139386136326561396537656463393633356638336564613165666336
                  62646263353736336339313062323733623835613664353138366434343233663965623238646566
                  65313165393437333237306261313636333237346430373161303230393835393439663965623239
                  31303138666633396163386161663162353865373433303430633666346538643766333966633938
                  30323462636166383563323037626566656562326661643337396136356435646336663264303238
                  39663561313034393161653166386234663037336535316233633662316561626634336236666662
                  38393030383263393465663933353261623236313635643031343637666136633334613962653134
                  39636636343134333463636338613564643839316232303035636463333338313838646161343963
                  39316532393262666139376562326532666535393935373734363363366538636439336638666438
                  39616263363065666230396565333331623238326666666130636131333637613036303237386538
                  30666534356364666563336161653065663735643934343739366338316163616432653963663734
                  34666231353733346663663937326138623639356561393135653434336532393365303636626166
                  38643139303638313663363633653437623631333636623237346631346632656133366463646332
                  62373863343137356137303964336661363664366238333964626633376239393664653438333839
                  66306564306530393132623264356239643833333466343833616139663239366133653461636463
                  31373837313633373261373337616261376263626238333839303237346139333932626665623466
                  30303764656666326462323133343866653765656135363437633433316130326439333866383734
                  65393031616534346564646531663637653865633265636163326563316432323235356635626161
                  64656562666664663930306464666261333064663363663332363961616262316534366131636566
                  65333030383337636162303432343163326262343965393930623134353764376636643263613035
                  61383738666630376461356166393238376264303832303637663035623839663435366565646338
                  63376432313666393535636530363537616633346463616466633066656164666634666436373832
                  39623862616631343733363936376161666635333235616334643565333433623936356164333636
                  65383936653464303964353838333436633833303235333233626163303638663836383730323661
                  39383765376663396636643236666635336132646632336264663933363264653830396234323062
                  36653236316139343732346566303831343266653866653963346633363439356434353133333830
                  38643766666334383061663839353235393865353736376138613536633030383063366639363533
                  36663831326366343834353930343335303661616261653230666636303538653235346565316335
                  34326639376363383736323832666334653537636363303533646165316232626136323536653663
                  39613634373130643037363134323730393065396639626630326165333662656532656531336235
                  64323334333038623731
    state: present
  - name: Demo_vault
    credential_type: "Vault"
    description: Demo_vault credential
    team: Development
    vault_password: !vault |
                    $ANSIBLE_VAULT;1.1;AES256
                    64383738633935653133376235376634383235373837386134393065616436613062613965666635
                    3836663361336135386632636238656531326264623138320a633863303534323262313136663433
                    64333232353866343933643031333939363032353438336434626262363964616236346339643862
                    3030323166336532630a653838313731353037376262623532373164343732623062373831363462
                    3239
    state: present

awx_job_templates:
  - name: unifi_run
    description: unifi_run job
    job_type: run
    inventory: Demo_production_unifi
    project: stanchan_ansible-unifi
    playbook: unifi.yml
    machine_credential: Demo_teleport
    state: present

teleport_version: 2.4.1
teleport_tsh_bin_url: "https://repo.Demo.com/teleport/v{{ teleport_version }}/linux/tsh"
teleport_repo_base_url: https://repo.Demo.com/teleport
teleport_proxy_host: awxhost.Demo.com
teleport_domain: Demo.com
teleport_proxy_port: 3080
teleport_awx_user: awx
teleport_auth_cluster_name: production
teleport_commands:
  - kernel:
      command: '[uname, -r]'
      period: 1h0m0s
  - arch:
      command: '[uname, -m]'
      period: 1h0m0s
  - uptime:
      command: '[python, -m, uptime]'
      period: 1m0s
#teleport_proxy_https_key_file: "/srv/caddy/.caddy/acme/acme-v01.api.letsencrypt.org/sites/hub.Demo.com/hub.Demo.com.key"
#teleport_proxy_https_cert_file: "/srv/caddy/.caddy/acme/acme-v01.api.letsencrypt.org/sites/hub.Demo.com/hub.Demo.com.crt"

